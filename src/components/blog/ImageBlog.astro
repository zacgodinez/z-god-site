---
interface Props {
  src: string;
  alt: string;
  className?: string;
  caption?: string;
  width?: number | string;
  height?: number | string;
}

const { src, alt, className = 'zg-blog-image', caption, width, height } = Astro.props;

const isDevelopment = import.meta.env.MODE === 'development';
const baseUrl: string = import.meta.env.BASE_URL;
const baseSite: string = import.meta.env.SITE;
const leadingPath: string = isDevelopment ? '' : `${baseSite}${baseUrl}`;
---

<figure class={className}>
  <img src={`${leadingPath}${src}`} alt={alt} loading="lazy" width={width} height={height} />
  {caption && <figcaption>{caption}</figcaption>}
</figure>

<style>
  .zg-blog-image {
    display: block;
    text-align: center;
  }

  .zg-blog-image img {
    max-width: 100%;
    width: 100%;
    height: auto;
    display: block;
    height: auto;
  }

  .zg-blog-image figcaption {
    margin-top: 0.5rem;
    text-align: center;
    font-size: 0.9rem;
    color: #666;
    font-style: italic;
  }
</style>
